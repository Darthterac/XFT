javascript:(function(){if(window.SOPHISTV1&&window.SOPHISTV1.destroy){window.SOPHISTV1.destroy();}const SNAP_KEY="SOPHISTV1_snapshots";const META_KEY="SOPHISTV1_meta";const state={handles:new Set(),snapshots:[],intervalId:null,ui:null};let editingSnapshot=false;let meta={};let%20autoScroll=false;let%20autoScrollTimer=null;function%20startAutoScroll(){if(autoScroll)return;autoScroll=true;function%20step(){if(!autoScroll)return;window.scrollBy(0,800);autoScrollTimer=setTimeout(step,750);}step();}function%20stopAutoScroll(){autoScroll=false;if%20(autoScrollTimer){clearTimeout(autoScrollTimer);autoScrollTimer=null;}}function loadSnapshots(){try{const raw=localStorage.getItem(SNAP_KEY);if(!raw)return;const parsed=JSON.parse(raw);if(Array.isArray(parsed))state.snapshots=parsed;}catch(e){console.warn("Nyx-X-API-LOL-V1: failed to load snapshots",e);}}function saveSnapshots(){try{localStorage.setItem(SNAP_KEY,JSON.stringify(state.snapshots));}catch(e){console.warn("Nyx-X-API-LOL-V1: failed to save snapshots",e);}}function loadMeta(){try{const raw=localStorage.getItem(META_KEY);if(raw)meta=JSON.parse(raw)||{};}catch(e){console.warn("Nyx meta load failed",e);meta={};}}function saveMeta(){try{localStorage.setItem(META_KEY,JSON.stringify(meta));}catch(e){console.warn("Nyx meta save failed",e);}}function fmtTime(ts){try{return new Date(ts).toLocaleString();}catch(e){return String(ts);}}function setStatus(msg){if(!state.ui)return;state.ui.status.textContent=msg;}function scanFollowers(){const nodes=document.querySelectorAll('[data-testid="userFollowIndicator"] span');let newlyAdded=0;const handleRe=/^@[A-Za-z0-9_]{2,}$/;nodes.forEach(span=>{const txt=(span.textContent||"").trim();if(txt!=="Follows you")return;const root=span.closest('[data-testid="userFollowIndicator"]');if(!root)return;const card=root.closest("div.css-175oi2r.r-1awozwy.r-18u37iz.r-1wbh5a2")||(root.parentElement&&root.parentElement.parentElement)||root.parentElement;if(!card)return;const handleSpan=Array.from(card.querySelectorAll("span")).find(s=>handleRe.test((s.textContent||"").trim()));if(!handleSpan)return;const handle=(handleSpan.textContent||"").trim();if(!state.handles.has(handle)){state.handles.add(handle);newlyAdded++;}});if(newlyAdded>0){refreshList();setStatus("Found "+state.handles.size+" followers %E2%80%A2 Snapshots: "+state.snapshots.length);}}function enrichHandleInteractive(handle){const username=handle.slice(1);const url="https://x.com/"+encodeURIComponent(username);const win=window.open(url,"_blank");if(!win){setStatus("Popup blocked %E2%80%93 allow popups for this site and click again.");return;}setStatus("Opened "+handle+" in new tab %E2%80%93 waiting for tweets%E2%80%A6");let attempts=0;const maxAttempts=20;function tryScrape(){attempts++;try{const doc=win.document;if(!doc||doc.readyState==="loading"){if(attempts<maxAttempts){setTimeout(tryScrape,1000);}else{setStatus("Timed out waiting for "+handle+" page to load.");}return;}const articles=doc.querySelectorAll('article[data-testid="tweet"]');let timeEl=null;for(const art of articles){const ctx=art.querySelector('[data-testid="socialContext"]');const txt=((ctx&&ctx.textContent)||"").toLowerCase();const isPinned=txt.includes("pinned");if(isPinned)continue;const t=art.querySelector("time[datetime]");if(t){timeEl=t;break;}}if(!timeEl){if(attempts<maxAttempts){setTimeout(tryScrape,1000);}else{setStatus("Couldn't find a recent tweet for "+handle);}return;}const label=timeEl.textContent.trim();const iso=timeEl.getAttribute("datetime")||null;meta[handle]={lastPostLabel:label,lastPostISO:iso,capturedAt:new Date().toISOString()};saveMeta();refreshList();setStatus("Updated "+handle+" %E2%80%A2 last post: "+label);}catch(e){if(attempts<maxAttempts){setTimeout(tryScrape,1000);}else{console.warn("Error scraping profile for",handle,e);setStatus("Error reading tab for "+handle);}}}setTimeout(tryScrape,1500);}function refreshList(){if(!state.ui||!state.ui.list)return;const container=state.ui.list;container.innerHTML="";const handles=Array.from(state.handles).sort();handles.forEach(h=>{const row=document.createElement("div");row.style.padding="1px 2px";const link=document.createElement("a");link.href="https://x.com/"+encodeURIComponent(h.slice(1));link.textContent=h;link.style.color="#58a6ff";link.style.textDecoration="underline";link.target="_blank";link.rel="noopener%20noreferrer";link.addEventListener("click",function(ev){ev.preventDefault();enrichHandleInteractive(h);});const%20infoSpan=document.createElement("span");let%20text="%20%20%20%20-%20Follows%20you";if(meta[h]&&meta[h].lastPostLabel){text+="%20%E2%80%A2%20last%20post:%20"+meta[h].lastPostLabel;}infoSpan.textContent=text;row.appendChild(link);row.appendChild(infoSpan);container.appendChild(row);});}function%20startScan(){if(state.intervalId)return;scanFollowers();state.intervalId=setInterval(scanFollowers,1000);startAutoScroll();setStatus("Scanning%20every%201s%E2%80%A6%20auto-scrolling%20followers%20%E2%80%A2%20Snapshots:%20"+state.snapshots.length);}function%20stopScan(){if(!state.intervalId)return;clearInterval(state.intervalId);state.intervalId=null;stopAutoScroll();setStatus("Stopped%20scanning%20&%20auto-scroll%20%E2%80%A2%20Snapshots:%20"+state.snapshots.length);}function%20copyCurrent(){if(state.handles.size===0){setStatus("Nothing%20to%20copy%20yet");return;}const%20text=Array.from(state.handles).sort().map(h=>{const%20info=meta[h]&&meta[h].lastPostLabel?"%20%20%20%20%E2%80%A2%20last%20post:%20"+meta[h].lastPostLabel:"";return%20h+"%20%20%20%20-%20Follows%20you"+info;}).join("\n");if(navigator.clipboard&&navigator.clipboard.writeText){navigator.clipboard.writeText(text).then(()=>{setStatus("Copied%20current%20followers%20to%20clipboard%20%E2%9C%93");}).catch(err=>{console.error(err);fallbackCopy(text);});}else{fallbackCopy(text);}}function%20fallbackCopy(text){const%20ta=document.createElement("textarea");ta.value=text;document.body.appendChild(ta);ta.select();try{document.execCommand("copy");setStatus("Copied%20to%20clipboard%20(fallback)%20%E2%9C%93");}catch(e){console.error(e);setStatus("Copy%20failed%20%E2%9C%97");}document.body.removeChild(ta);}function%20takeSnapshot(){if(state.handles.size===0){setStatus("No%20followers%20detected%20yet%20%E2%80%93%20press%20Start%20and%20scroll%20followers%20to%20capture");return;}const%20ts=Date.now();const%20snap={id:ts,ts:ts,handles:Array.from(state.handles).sort()};state.snapshots.push(snap);saveSnapshots();setStatus("Snapshot%20#"+state.snapshots.length+"%20saved%20at%20"+fmtTime(ts));if(state.ui&&state.ui.textarea){state.ui.textarea.value="===%20Snapshot%20#"+state.snapshots.length+"%20===\nTime:%20"+fmtTime(ts)+"\nCount:%20"+snap.handles.length+"\n\n"+snap.handles.join("\n");}}function%20exportSnapshots(){if(state.snapshots.length===0){setStatus("No%20snapshots%20to%20export%20yet");return;}const%20payload={exportedAt:new%20Date().toISOString(),count:state.snapshots.length,snapshots:state.snapshots};const%20json=JSON.stringify(payload,null,2);try{const%20blob=new%20Blob([json],{type:"application/json"});const%20url=URL.createObjectURL(blob);const%20a=document.createElement("a");const%20ts=new%20Date().toISOString().replace(/[:.]/g,"-");a.href=url;a.download="nyx-x-api-followers-snapshots-"+ts+".json";document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);setStatus("Exported%20"+state.snapshots.length+"%20snapshots%20as%20JSON%20%E2%9C%93");}catch(e){console.error(e);setStatus("Export%20failed%20%E2%9C%97%20%E2%80%93%20see%20console");}}function%20diffLast(){if(state.snapshots.length===0){setStatus("No%20snapshots%20yet%20%E2%80%93%20take%20one%20first");return;}if(state.handles.size===0){setStatus("No%20current%20followers%20%E2%80%93%20press%20Start%20and%20scroll%20first");return;}const%20last=state.snapshots[state.snapshots.length-1];const%20oldSet=new%20Set(last.handles);const%20curSet=new%20Set(state.handles);const%20lost=[];const%20gained=[];oldSet.forEach(h=>{if(!curSet.has(h))lost.push(h);});curSet.forEach(h=>{if(!oldSet.has(h))gained.push(h);});lost.sort();gained.sort();const%20lines=[];lines.push("===%20Diff%20vs%20last%20snapshot%20#"+state.snapshots.length+"%20===");lines.push("Snapshot%20time:%20"+fmtTime(last.ts));lines.push("Snapshot%20count:%20"+last.handles.length);lines.push("Current%20count:%20"+state.handles.size);lines.push("");lines.push("Followers%20lost%20since%20last%20snapshot%20("+lost.length+"):");%20lines.push(lost.length?lost.join("\n"):"(none)");lines.push("");lines.push("Followers%20gained%20since%20last%20snapshot%20("+gained.length+"):");%20lines.push(gained.length?gained.join("\n"):"(none)");if(state.ui&&state.ui.textarea){state.ui.textarea.value=lines.join("\n");}setStatus("Diff%20computed%20%E2%80%93%20Lost:%20"+lost.length+",%20Gained:%20"+gained.length);}function%20editLast(){if(state.snapshots.length===0){setStatus("No%20snapshots%20yet%20%E2%80%93%20nothing%20to%20edit");return;}if(!state.ui||!state.ui.textarea)return;const%20last=state.snapshots[state.snapshots.length-1];const%20ta=state.ui.textarea;const%20handleRe=/^@[A-Za-z0-9_]{2,}$/;if(!editingSnapshot){ta.value=last.handles.join("\n");editingSnapshot=true;setStatus('Editing%20last%20snapshot%20#'+state.snapshots.length+'%20%E2%80%93%20modify%20list%20and%20click%20"Edit%20last"%20again%20to%20save');}else{const%20lines=ta.value.split("\n").map(s=>s.trim()).filter(Boolean).filter(s=>handleRe.test(s));const%20unique=Array.from(new%20Set(lines)).sort();last.handles=unique;saveSnapshots();editingSnapshot=false;setStatus("Saved%20edits%20to%20snapshot%20#"+state.snapshots.length+"%20(handles:%20"+last.handles.length+")");}}function%20clearSnapshots(){state.snapshots=[];saveSnapshots();setStatus("All%20snapshots%20deleted");}function%20buildUI(){const%20panel=document.createElement("div");panel.style.position="fixed";panel.style.top="40px";panel.style.right="40px";panel.style.width="360px";panel.style.height="460px";panel.style.zIndex="999999";panel.style.background="#111";panel.style.color="#eee";panel.style.border="1px%20solid%20#444";panel.style.borderRadius="8px";panel.style.boxShadow="0%200%2012px%20rgba(0,0,0,0.7)";panel.style.fontFamily="system-ui,-apple-system,BlinkMacSystemFont,sans-serif";panel.style.fontSize="12px";panel.style.display="flex";panel.style.flexDirection="column";panel.style.resize="both";panel.style.overflow="hidden";const%20header=document.createElement("div");header.textContent="X%20followers%20tool%20v1.3.0%20(@2w1s7ed%20%F0%9F%87%A8%F0%9F%87%A6%20&%20Nyx%F0%9F%A4%96)";header.style.padding="6px%208px";header.style.cursor="move";header.style.background="#222";header.style.borderBottom="1px%20solid%20#0adf1b";header.style.display="flex";header.style.alignItems="center";header.style.justifyContent="space-between";const%20close=document.createElement("span");close.textContent="%C3%97";close.style.cursor="pointer";close.style.paddingLeft="8px";close.onclick=function(){stopScan();if(panel.parentNode)panel.parentNode.removeChild(panel);};header.appendChild(close);const%20row1=document.createElement("div");row1.style.display="flex";row1.style.gap="4px";row1.style.padding="4px%206px";function%20styleBtn(btn,label){btn.textContent=label;btn.style.flex="1";btn.style.fontSize="11px";btn.style.padding="3px%204px";btn.style.cursor="pointer";btn.style.border="1px%20solid%20#7f7f7f";btn.style.borderRadius="3px";btn.style.background="#323232";btn.style.color="#ffffff";}const%20btnStart=document.createElement("button");const%20btnStop=document.createElement("button");const%20btnCopy=document.createElement("button");const%20btnClear=document.createElement("button");styleBtn(btnStart,"Start");styleBtn(btnStop,"Stop");styleBtn(btnCopy,"Copy");styleBtn(btnClear,"Clear");btnStart.onclick=startScan;btnStop.onclick=stopScan;btnCopy.onclick=copyCurrent;btnClear.onclick=function(){state.handles.clear();refreshList();setStatus("Cleared%20current%20list%20%E2%80%A2%20Snapshots:%20"+state.snapshots.length);};row1.appendChild(btnStart);row1.appendChild(btnStop);row1.appendChild(btnCopy);row1.appendChild(btnClear);const%20row2=document.createElement("div");row2.style.display="flex";row2.style.gap="4px";row2.style.padding="0%206px%204px%206px";row2.style.flexWrap="wrap";const%20btnSnap=document.createElement("button");const%20btnExport=document.createElement("button");const%20btnDiff=document.createElement("button");const%20btnEdit=document.createElement("button");const%20btnDel=document.createElement("button");[btnSnap,btnExport,btnDiff,btnEdit,btnDel].forEach(b=>{b.style.flex="1";b.style.fontSize="11px";b.style.padding="3px%204px";b.style.cursor="pointer";b.style.marginTop="2px";b.style.border="1px%20solid%20#7f7f7f";b.style.borderRadius="3px";b.style.background="#323232";b.style.color="#ffffff";});btnSnap.textContent="Snapshot";btnExport.textContent="Export%20JSON";btnDiff.textContent="Diff%20vs%20last";btnEdit.textContent="Edit%20last";btnDel.textContent="Delete%20snaps";btnSnap.onclick=takeSnapshot;btnExport.onclick=exportSnapshots;btnDiff.onclick=diffLast;btnEdit.onclick=editLast;btnDel.onclick=clearSnapshots;row2.appendChild(btnSnap);row2.appendChild(btnExport);row2.appendChild(btnDiff);row2.appendChild(btnEdit);row2.appendChild(btnDel);const%20status=document.createElement("div");status.style.padding="2px%206px";status.style.fontSize="11px";status.style.borderTop="1px%20solid%20#333";status.style.borderBottom="1px%20solid%20#333";status.textContent="Idle%20%E2%80%93%20press%20Start%20and%20scroll%20your%20followers.";const%20list=document.createElement("div");list.style.flex="1";list.style.margin="4px%206px%202px%206px";list.style.background="#000";list.style.color="#0f0";list.style.border="1px%20solid%20#333";list.style.fontFamily="monospace";list.style.fontSize="11px";list.style.overflow="auto";const%20textarea=document.createElement("textarea");textarea.style.flex="1";textarea.style.margin="2px%206px%206px%206px";textarea.style.width="calc(100%%20-%2012px)";textarea.style.resize="none";textarea.style.background="#000";textarea.style.color="#0f0";textarea.style.border="1px%20solid%20#333";textarea.style.fontFamily="monospace";textarea.style.fontSize="11px";panel.appendChild(header);panel.appendChild(row1);panel.appendChild(row2);panel.appendChild(status);panel.appendChild(list);panel.appendChild(textarea);document.body.appendChild(panel);makeDraggable(panel,header);state.ui={panel:panel,textarea:textarea,status:status,list:list};}function%20makeDraggable(panel,handle){let%20dragging=false;let%20startX=0,startY=0,origX=0,origY=0;handle.addEventListener("mousedown",function(ev){dragging=true;startX=ev.clientX;startY=ev.clientY;const%20rect=panel.getBoundingClientRect();origX=rect.left;origY=rect.top;panel.style.left=rect.left+"px";panel.style.top=rect.top+"px";panel.style.right="auto";function%20onMove(e){if(!dragging)return;const%20dx=e.clientX-startX;const%20dy=e.clientY-startY;panel.style.left=origX+dx+"px";panel.style.top=origY+dy+"px";}function%20onUp(){if(!dragging)return;dragging=false;document.removeEventListener("mousemove",onMove);document.removeEventListener("mouseup",onUp);}document.addEventListener("mousemove",onMove);document.addEventListener("mouseup",onUp);ev.preventDefault();});}window.SOPHISTV1={destroy:function(){stopScan();if(state.ui&&state.ui.panel&&state.ui.panel.parentNode){state.ui.panel.parentNode.removeChild(state.ui.panel);}state.handles.clear();}};loadSnapshots();loadMeta();buildUI();setStatus("Idle%20%E2%80%93%20press%20Start%20and%20scroll%20your%20followers%20%E2%80%A2%20Snapshots:%20"+state.snapshots.length);})();